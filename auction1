import discord, time, datetime
from discord.ext import commands

# Create class that acts as a countdown
def countdown(h, m, s):

    # Calculate the total number of seconds
    total_seconds = h * 3600 + m * 60 + s

    # While loop that checks if total_seconds reaches zero
    # If not zero, decrement total time by one second
    while total_seconds > 0:

        # Timer represents time left on countdown
        timer = datetime.timedelta(seconds = total_seconds)

        # Prints the time left on the timer
        print(timer, end="\r")

        # Delays the program one second
        time.sleep(1)

        # Reduces total time by one second
        total_seconds -= 1

    print("Bzzzt! The countdown is at zero seconds!")

# Inputs for hours, minutes, seconds on timer
h = input("Enter the time in hours: ")
m = 0
s = 0
#m = input("Enter the time in minutes: ")
#s = input("Enter the time in seconds: ")
countdown(int(h), int(m), int(s))

client = discord.Client()
client = commands.Bot(command_prefix = "!")

@client.event()
async def on_message(message):
    if message.content == ('howto'):
        await message.channel.send(f"name, keyword, restriction, duration (days), end time, "
            f"threshold time (hours), item link. Class/race restrictions and the "
            f"item link must be wrapped in quotes."
            )

@bot.command(newauction)
async def newauction(ctx, name, keyword, restriction, endday, endtime, threshold, itemlink):
    await ctx.send(f"You are making a new auction for {name}. "
        f"Members can bid by using the {keyword} keyword. "
        f"You have declared only {restriction} may place bid (auctioneer does not track this). "
        f"Bidding will end after {endday} days at {endtime}, "
        f"bidding in the last {threshold} hours will reset the timer to {threshold}. "
        f"The link for the item is {itemlink}."
                    )

    print(
        f"{name} DKP auction! Closes {enddate} at {endtime} EST. Please bid DKP in this channel. @raiders - green @dkpauction - Green"
        f"/n/n{itemlink}"
        f"/n*Bid format: {keyword} 1dkp main (or 2main)"
        f"/n*Not for resale. Please bid only to use this item. You may return it to the guild bank for your DKP back."
        f"/n*As usual, no joke bids."
        f"/n*Bids are restricted to:{restriction}"
        f"/n*Closes {enddate} at {endtime} EST. Bids during the last {threshold} automatically extend bidding period."
        f"/n*This channel should be bids only - questions and discussion in #raid-chat-green")


client.run('OTIwMzgyNTA3NTU4NTEwNjQy.YbjjAQ.wgei6nA-bM7DQZilOAdlQ_9Au44')
